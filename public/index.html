<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enterprise Events Manager by Ampla Metra</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #f3e8ff 0%, #eff6ff 100%); min-height: 100vh; padding: 1rem; }
    .container { max-width: 1400px; margin: 0 auto; }
    header { margin-bottom: 1rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
    h1 { color: #6b21a8; font-size: 2rem; }
    .tabs-container { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.5rem; }
    .tab-btn { padding: 0.75rem 1.5rem; background: #f3f4f6; border: none; border-radius: 0.375rem 0.375rem 0 0; cursor: pointer; font-weight: 500; color: #4b5563; transition: all 0.3s; }
    .tab-btn.active { background: #9333ea; color: white; }
    .tab-btn:hover { background: #e5e7eb; }
    .tab-btn.active:hover { background: #7e22ce; }
    .card { background: white; border-radius: 0.5rem; box-shadow: 0 10px 25px rgba(0,0,0,0.1); padding: 1.5rem; margin-bottom: 1rem; }
    .main-grid { display: grid; grid-template-columns: 1fr 300px; gap: 1.5rem; }
    @media (max-width: 1024px) { .main-grid { grid-template-columns: 1fr; } }
    button { padding: 0.5rem 1rem; border: none; border-radius: 0.375rem; cursor: pointer; font-weight: 500; font-size: 0.875rem; transition: all 0.2s; }
    .btn-primary { background: #9333ea; color: white; }
    .btn-primary:hover { background: #7e22ce; }
    .btn-secondary { background: #e5e7eb; color: #1f2937; }
    .btn-secondary:hover { background: #d1d5db; }
    .btn-success { background: #16a34a; color: white; }
    .btn-danger { background: #dc2626; color: white; }
    .btn-small { padding: 0.25rem 0.75rem; font-size: 0.75rem; }
    input, select, textarea { width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem; font-size: 0.875rem; margin-bottom: 0.5rem; font-family: inherit; }
    input:focus, select:focus, textarea:focus { outline: none; border-color: #9333ea; box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.1); }
    label { display: block; font-size: 0.875rem; color: #4b5563; margin-bottom: 0.5rem; font-weight: 500; }
    .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 50; align-items: center; justify-content: center; padding: 1rem; overflow-y: auto; }
    .modal.active { display: flex; }
    .modal-content { background: white; border-radius: 0.5rem; max-width: 600px; width: 100%; padding: 2rem; max-height: 90vh; overflow-y: auto; }
    .modal-header { font-size: 1.5rem; font-weight: bold; color: #111827; margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center; }
    .close-btn { background: none; border: none; font-size: 2rem; cursor: pointer; color: #4b5563; }
    .form-group { margin-bottom: 1rem; }
    .alert { padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem; }
    .alert-info { background: #eff6ff; border: 1px solid #bfdbfe; color: #0c4a6e; }
    .user-info { background: white; padding: 1rem; border-radius: 0.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
    .user-info p { color: #4b5563; font-size: 0.875rem; margin: 0.25rem 0; }
    .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1rem; }
    .stat-box { background: white; padding: 1rem; border-radius: 0.5rem; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-left: 4px solid #9333ea; }
    .stat-label { color: #4b5563; font-size: 0.875rem; }
    .stat-number { font-size: 1.75rem; font-weight: bold; color: #9333ea; margin-top: 0.5rem; }
    .event-item { background: #f9fafb; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem; border-left: 4px solid #9333ea; }
    .event-item h3 { color: #111827; margin-bottom: 0.5rem; }
    .event-item p { color: #4b5563; font-size: 0.875rem; margin: 0.25rem 0; }
    .empty { text-align: center; color: #4b5563; padding: 2rem; }
    .calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem; margin: 1rem 0; }
    .calendar-day { border: 1px solid #e5e7eb; padding: 0.5rem; min-height: 80px; border-radius: 0.375rem; font-size: 0.75rem; }
    .calendar-day.other-month { background: #f9fafb; }
    .calendar-header { font-weight: bold; text-align: center; padding: 0.5rem; }
    .rsvp-badge { display: inline-block; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.7rem; font-weight: bold; margin: 0.25rem; }
    .rsvp-yes { background: #dcfce7; color: #15803d; }
    .rsvp-no { background: #fee2e2; color: #dc2626; }
    .rsvp-maybe { background: #fef3c7; color: #92400e; }
    .rsvp-pending { background: #e5e7eb; color: #4b5563; }
    .form-group-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .chart-bar { display: flex; align-items: center; margin-bottom: 1rem; }
    .chart-label { width: 120px; font-size: 0.875rem; font-weight: 500; }
    .chart-bar-fill { height: 30px; background: #9333ea; border-radius: 0.25rem; display: flex; align-items: center; justify-content: flex-end; padding-right: 0.5rem; color: white; font-weight: bold; min-width: 40px; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Zik Prize Awards</h1>
        <p style="color: #4b5563;">Events Manager by Ampla Metra</p>
      </div>
    </header>

    <div id="appContent">
      <div class="tabs-container">
        <button class="tab-btn active" onclick="switchTab('events')">üìÖ Events</button>
        <button class="tab-btn" onclick="switchTab('registrations')">üë• Registrations</button>
        <button class="tab-btn" onclick="switchTab('vendors')">üè¢ Vendors</button>
        <button class="tab-btn" onclick="switchTab('budget')">üí∞ Budget</button>
        <button class="tab-btn" onclick="switchTab('awards')">üèÜ Awards</button>
        <button class="tab-btn" onclick="switchTab('analytics')">üìä Analytics</button>
      </div>

      <div class="main-grid">
        <div id="mainContent"></div>
        
        <div>
          <div class="card">
            <h3 style="font-weight: bold; margin-bottom: 1rem;">Dashboard</h3>
            <div class="stats" style="display: flex; flex-direction: column; gap: 0.5rem;">
              <div class="stat-box">
                <div class="stat-label">Events</div>
                <div class="stat-number" id="statEvents">0</div>
              </div>
              <div class="stat-box">
                <div class="stat-label">Attendees</div>
                <div class="stat-number" id="statAttendees">0</div>
              </div>
              <div class="stat-box">
                <div class="stat-label">Vendors</div>
                <div class="stat-number" id="statVendors">0</div>
              </div>
              <div class="stat-box">
                <div class="stat-label">Budget</div>
                <div class="stat-number" id="statBudget" style="font-size: 1.25rem;">‚Ç¶0</div>
              </div>
              <div class="stat-box">
                <div class="stat-label">RSVP Yes</div>
                <div class="stat-number" style="color: #15803d;" id="statRsvpYes">0</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Event Form Modal -->
  <div id="eventModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span>Create New Event</span>
        <button class="close-btn" onclick="closeEventForm()">√ó</button>
      </div>
      <div class="form-group">
        <label>Event Title</label>
        <input type="text" id="eventTitle" placeholder="e.g., Zik Prize Awards Ceremony">
      </div>
      <div class="form-group-row">
        <div class="form-group">
          <label>Date</label>
          <input type="date" id="eventDate">
        </div>
        <div class="form-group">
          <label>Time</label>
          <input type="time" id="eventTime">
        </div>
      </div>
      <div class="form-group">
        <label>Location</label>
        <input type="text" id="eventLocation" placeholder="Venue location">
      </div>
      <div class="form-group-row">
        <div class="form-group">
          <label>Budget (‚Ç¶)</label>
          <input type="number" id="eventBudget" value="0" step="1000">
        </div>
        <div class="form-group">
          <label>Expected Attendees</label>
          <input type="number" id="eventAttendees" value="0">
        </div>
      </div>
      <div class="form-group">
        <label>Description</label>
        <textarea id="eventDescription" placeholder="Event details" style="min-height: 80px;"></textarea>
      </div>
      <div style="display: flex; gap: 0.5rem;">
        <button class="btn-secondary" onclick="closeEventForm()" style="flex: 1;">Cancel</button>
        <button class="btn-primary" onclick="saveEvent()" style="flex: 1;">Save Event</button>
      </div>
    </div>
  </div>

  <!-- Attendee Modal -->
  <div id="attendeeModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span>Register Attendee</span>
        <button class="close-btn" onclick="closeAttendeeForm()">√ó</button>
      </div>
      <div class="form-group">
        <label>Full Name</label>
        <input type="text" id="attendeeName" placeholder="Attendee name">
      </div>
      <div class="form-group">
        <label>Email</label>
        <input type="email" id="attendeeEmail" placeholder="Email address">
      </div>
      <div class="form-group">
        <label>Phone</label>
        <input type="tel" id="attendeePhone" placeholder="Phone number">
      </div>
      <div class="form-group-row">
        <div class="form-group">
          <label>RSVP Status</label>
          <select id="attendeeRsvp">
            <option value="pending">Pending</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option value="maybe">Maybe</option>
          </select>
        </div>
        <div class="form-group">
          <label>Category</label>
          <select id="attendeeCategory">
            <option value="guest">Guest</option>
            <option value="vip">VIP</option>
            <option value="media">Media</option>
            <option value="vendor">Vendor</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>Physical Address</label>
        <textarea id="attendeeAddress" placeholder="For invitation cards" style="min-height: 60px;"></textarea>
      </div>
      <div style="display: flex; gap: 0.5rem;">
        <button class="btn-secondary" onclick="closeAttendeeForm()" style="flex: 1;">Cancel</button>
        <button class="btn-primary" onclick="saveAttendee()" style="flex: 1;">Save Attendee</button>
      </div>
    </div>
  </div>

  <!-- Vendor Modal -->
  <div id="vendorModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span>Add Vendor</span>
        <button class="close-btn" onclick="closeVendorForm()">√ó</button>
      </div>
      <div class="form-group">
        <label>Vendor Name</label>
        <input type="text" id="vendorName" placeholder="Company name">
      </div>
      <div class="form-group">
        <label>Category</label>
        <select id="vendorCategory">
          <option value="catering">Catering</option>
          <option value="decoration">Decoration</option>
          <option value="sound">Sound & AV</option>
          <option value="photography">Photography</option>
          <option value="banners">Banners</option>
          <option value="brochure">Brochure</option>
          <option value="moc">Master of Ceremony</option>
          <option value="hospitality">Hospitality</option>
          <option value="invitations">Invitation Cards</option>
          <option value="distribution">Distribution</option>
          <option value="interviews">Interviews/Documentaries</option>
          <option value="social-media">Social Media</option>
          <option value="press">Press Mention</option>
          <option value="tv-ads">TV Ads</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div class="form-group-row">
        <div class="form-group">
          <label>Contact Email</label>
          <input type="email" id="vendorEmail" placeholder="Email">
        </div>
        <div class="form-group">
          <label>Contact Phone</label>
          <input type="tel" id="vendorPhone" placeholder="Phone">
        </div>
      </div>
      <div class="form-group-row">
        <div class="form-group">
          <label>Cost (‚Ç¶)</label>
          <input type="number" id="vendorCost" value="0" step="1000">
        </div>
        <div class="form-group">
          <label>Rating (1-5)</label>
          <input type="number" id="vendorRating" min="1" max="5" value="5">
        </div>
      </div>
      <div class="form-group">
        <label>Payment Status</label>
        <select id="vendorPayment">
          <option value="pending">Pending</option>
          <option value="partial">Partial</option>
          <option value="paid">Paid</option>
        </select>
      </div>
      <div class="form-group">
        <label>Checklist (comma-separated)</label>
        <textarea id="vendorChecklist" placeholder="e.g., Setup, Equipment, Delivery, Follow-up" style="min-height: 60px;"></textarea>
      </div>
      <div style="display: flex; gap: 0.5rem;">
        <button class="btn-secondary" onclick="closeVendorForm()" style="flex: 1;">Cancel</button>
        <button class="btn-primary" onclick="saveVendor()" style="flex: 1;">Save Vendor</button>
      </div>
    </div>
  </div>

  <!-- Award Modal -->
  <div id="awardModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span>Add Award Category</span>
        <button class="close-btn" onclick="closeAwardForm()">√ó</button>
      </div>
      <div class="form-group">
        <label>Category Name</label>
        <input type="text" id="awardName" placeholder="e.g., Best Male Artist">
      </div>
      <div class="form-group">
        <label>Description</label>
        <textarea id="awardDescription" placeholder="Category details"></textarea>
      </div>
      <div class="form-group">
        <label>Master of Ceremony / Host Name</label>
        <input type="text" id="mocName" placeholder="MC name">
      </div>
      <div class="form-group">
        <label>Nominees (comma-separated)</label>
        <textarea id="nominees" placeholder="Nominee 1, Nominee 2, Nominee 3"></textarea>
      </div>
      <div style="display: flex; gap: 0.5rem;">
        <button class="btn-secondary" onclick="closeAwardForm()" style="flex: 1;">Cancel</button>
        <button class="btn-primary" onclick="saveAward()" style="flex: 1;">Save Category</button>
      </div>
    </div>
  </div>

  <script>
    let events = [];
    let attendees = [];
    let vendors = [];
    let awards = [];
    let currentUser = null;
    let currentEventId = null;

    const users = [
      { username: 'admin', password: 'admin123', role: 'Admin' },
      { username: 'manager', password: 'manager123', role: 'Manager' },
      { username: 'viewer', password: 'viewer123', role: 'Viewer' }
    ];

    function login() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();

      if (!username || !password) {
        alert('Please enter username and password');
        return;
      }

      const user = users.find(u => u.username === username && u.password === password);

      if (!user) {
        alert('Invalid credentials');
        return;
      }

      currentUser = { username: user.username, role: user.role };
      document.getElementById('userName').textContent = user.username;
      document.getElementById('userRole').textContent = user.role;
      document.getElementById('loginModal').classList.remove('active');
      document.getElementById('userPanel').style.display = 'block';
      document.getElementById('appContent').style.display = 'block';
      loadData();
      switchTab('events');
    }

    function logout() {
      if (confirm('Logout?')) {
        currentUser = null;
        document.getElementById('loginModal').classList.add('active');
        document.getElementById('userPanel').style.display = 'none';
        document.getElementById('appContent').style.display = 'none';
        document.getElementById('username').value = '';
        document.getElementById('password').value = '';
      }
    }

    function switchTab(tab) {
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');

      if (tab === 'events') renderEvents();
      else if (tab === 'registrations') renderRegistrations();
      else if (tab === 'vendors') renderVendors();
      else if (tab === 'budget') renderBudget();
      else if (tab === 'awards') renderAwards();
      else if (tab === 'analytics') renderAnalytics();
    }
    function renderEvents() {
      let html = '<button class="btn-primary" onclick="showEventForm()" style="margin-bottom: 1rem;">+ New Event</button>';
      html += '<div class="card"><h3>Events List</h3>';
      
      if (events.length === 0) {
        html += '<div class="empty">No events yet</div>';
      } else {
        events.forEach(e => {
          const attCount = attendees.filter(a => a.eventId === e.id).length;
          html += '<div class="event-item">';
          html += '<h3>' + e.title + '</h3>';
          html += '<p>üìÖ ' + e.date + ' at ' + e.time + '</p>';
          html += '<p>üìç ' + e.location + '</p>';
          html += '<p>üí∞ ‚Ç¶' + e.budget.toLocaleString() + ' | üë• ' + attCount + ' attendees</p>';
          html += '<button class="btn-secondary btn-small" onclick="manageEvent(' + e.id + ')">Manage</button>';
          html += '</div>';
        });
      }
      html += '</div>';
      
      // Calendar
      html += '<div class="card"><h3>Calendar</h3>' + renderCalendar() + '</div>';
      document.getElementById('mainContent').innerHTML = html;
    }

    function renderCalendar() {
      const today = new Date();
      const month = today.getMonth();
      const year = today.getFullYear();
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const startDate = new Date(firstDay);
      startDate.setDate(startDate.getDate() - firstDay.getDay());

      let html = '<div class="calendar">';
      ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(d => {
        html += '<div class="calendar-header">' + d + '</div>';
      });

      for (let i = 0; i < 42; i++) {
        const date = new Date(startDate);
        const dateStr = date.toISOString().split('T')[0];
        const eventOnDate = events.find(e => e.date === dateStr);
        html += '<div class="calendar-day ' + (date.getMonth() !== month ? 'other-month' : '') + '">';
        html += '<strong>' + date.getDate() + '</strong>';
        if (eventOnDate) html += '<p style="color: #9333ea; font-weight: bold;">üìå</p>';
        html += '</div>';
        startDate.setDate(startDate.getDate() + 1);
      }
      html += '</div>';
      return html;
    }

    function showEventForm() {
      document.getElementById('eventTitle').value = '';
      document.getElementById('eventDate').value = '';
      document.getElementById('eventTime').value = '';
      document.getElementById('eventLocation').value = '';
      document.getElementById('eventBudget').value = '0';
      document.getElementById('eventAttendees').value = '0';
      document.getElementById('eventDescription').value = '';
      document.getElementById('eventModal').classList.add('active');
    }

    function closeEventForm() {
      document.getElementById('eventModal').classList.remove('active');
    }

    function saveEvent() {
      const title = document.getElementById('eventTitle').value.trim();
      const date = document.getElementById('eventDate').value;

      if (!title || !date) {
        alert('Please fill title and date');
        return;
      }

      events.push({
        id: Date.now(),
        title: title,
        date: date,
        time: document.getElementById('eventTime').value,
        location: document.getElementById('eventLocation').value,
        budget: parseInt(document.getElementById('eventBudget').value),
        attendees: parseInt(document.getElementById('eventAttendees').value),
        description: document.getElementById('eventDescription').value
      });

      saveData();
      closeEventForm();
      alert('Event created!');
      renderEvents();
      updateStats();
    }

    function manageEvent(eventId) {
      currentEventId = eventId;
      const event = events.find(e => e.id === eventId);
      alert('Manage: ' + event.title + '\n\nUse Registration tab to manage attendees');
    }

    // REGISTRATIONS/ATTENDEES
    function renderRegistrations() {
      let html = '';
      
      if (events.length === 0) {
        html = '<div class="empty">No events created yet</div>';
      } else {
        events.forEach(event => {
          const eventAttendees = attendees.filter(a => a.eventId === event.id);
          const rsvpYes = eventAttendees.filter(a => a.rsvp === 'yes').length;
          const rsvpNo = eventAttendees.filter(a => a.rsvp === 'no').length;
          const rsvpMaybe = eventAttendees.filter(a => a.rsvp === 'maybe').length;
          const attended = eventAttendees.filter(a => a.checkedIn).length;

          html += '<div class="card">';
          html += '<h3>' + event.title + '</h3>';
          html += '<p>Registered: ' + eventAttendees.length + ' | ‚úÖ ' + rsvpYes + ' | ‚ùå ' + rsvpNo + ' | ‚ùì ' + rsvpMaybe + ' | üé´ Checked-in: ' + attended + '</p>';
          html += '<button class="btn-primary btn-small" onclick="addAttendeeForm(' + event.id + ')">+ Add Attendee</button>';
          html += '<button class="btn-secondary btn-small" onclick="showCheckIn(' + event.id + ')">Check-in</button>';
          html += '<button class="btn-secondary btn-small" onclick="exportAttendeeData(' + event.id + ')">Export CSV</button>';
          
          if (eventAttendees.length > 0) {
            html += '<div style="margin-top: 1rem;">';
            eventAttendees.forEach((att, i) => {
              const rsvpClass = 'rsvp-' + att.rsvp;
              html += '<div style="background: #f9fafb; padding: 0.75rem; border-radius: 0.375rem; margin-bottom: 0.5rem;">';
              html += '<p><strong>' + att.name + '</strong> <span class="rsvp-badge ' + rsvpClass + '">' + att.rsvp.toUpperCase() + '</span> ' + (att.checkedIn ? '‚úÖ Checked-in' : '') + '</p>';
              html += '<p style="font-size: 0.75rem; color: #666;">üìß ' + att.email + ' | üì± ' + att.phone + '</p>';
              html += '<button class="btn-secondary btn-small" onclick="deleteAttendee(' + event.id + ',' + i + ')">Delete</button>';
              html += '</div>';
            });
            html += '</div>';
          }
          html += '</div>';
        });
      }
      
      document.getElementById('mainContent').innerHTML = html;
    }

    function addAttendeeForm(eventId) {
      currentEventId = eventId;
      document.getElementById('attendeeName').value = '';
      document.getElementById('attendeeEmail').value = '';
      document.getElementById('attendeePhone').value = '';
      document.getElementById('attendeeRsvp').value = 'pending';
      document.getElementById('attendeeCategory').value = 'guest';
      
